{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yakov\\\\Documents\\\\Programming\\\\React JS\\\\social-media-frontend\\\\src\\\\components\\\\Post.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport '../css/group.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Post() {\n  _s();\n  const [postName, setPostName] = useState('');\n  const [photos, setPhotos] = useState([]);\n  const navigate = useNavigate();\n  const handlePostNameChange = event => {\n    setPostName(event.target.value);\n  };\n  const handlePhotosChange = event => {\n    setPhotos(event.target.files);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const apiEndpointUpload = \"http://127.0.0.1:8000/api/image/uploadPhotos\";\n      const apiEndpointPostCreating = \"http://127.0.0.1:8000/api/post\";\n      const token = localStorage.getItem('Token');\n      const formData = new FormData();\n      formData.append('name', postName);\n      formData.append('user_id', 1);\n      for (let i = 0; i < photos.length; i++) {\n        formData.append('photos[]', photos[i], photos[i].name);\n      }\n      const postResult = await axios.post(apiEndpointPostCreating, formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      const postId = postResult.data;\n      const formDataImages = new FormData();\n      formDataImages.append('post_id', postId);\n      for (let i = 0; i < photos.length; i++) {\n        formDataImages.append('photos[]', photos[i], photos[i].name);\n      }\n      await axios.post(apiEndpointUpload, formDataImages, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      navigate(\"/profile\"); // Перенаправление на другую страницу\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"group-form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        encType: \"multipart/form-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Create Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-data\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"postName\",\n            name: \"postName\",\n            value: postName,\n            onChange: handlePostNameChange,\n            placeholder: \"Enter a comment for the post:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"photos\",\n            name: \"photos[]\",\n            accept: \"image/*\",\n            placeholder: \"Post Photo\",\n            onChange: handlePhotosChange,\n            multiple: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"createPostButton\",\n            type: \"submit\",\n            children: \"Publish\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n_s(Post, \"s8C8xyy+p/Zmh04LqBmGKP8fp64=\", false, function () {\n  return [useNavigate];\n});\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","axios","useNavigate","jsxDEV","_jsxDEV","Post","_s","postName","setPostName","photos","setPhotos","navigate","handlePostNameChange","event","target","value","handlePhotosChange","files","handleSubmit","preventDefault","apiEndpointUpload","apiEndpointPostCreating","token","localStorage","getItem","formData","FormData","append","i","length","name","postResult","post","headers","Authorization","postId","data","formDataImages","error","console","className","children","onSubmit","encType","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","placeholder","type","accept","multiple","_c","$RefreshReg$"],"sources":["C:/Users/Yakov/Documents/Programming/React JS/social-media-frontend/src/components/Post.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../css/group.css';\r\n\r\nfunction Post() {\r\n    const [postName, setPostName] = useState('');\r\n    const [photos, setPhotos] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    const handlePostNameChange = (event) => {\r\n        setPostName(event.target.value);\r\n    };\r\n\r\n    const handlePhotosChange = (event) => {\r\n        setPhotos(event.target.files);\r\n    };\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        try {\r\n            const apiEndpointUpload = \"http://127.0.0.1:8000/api/image/uploadPhotos\";\r\n            const apiEndpointPostCreating = \"http://127.0.0.1:8000/api/post\";\r\n            const token = localStorage.getItem('Token');\r\n\r\n            const formData = new FormData();\r\n            formData.append('name', postName);\r\n            formData.append('user_id', 1);\r\n\r\n            for (let i = 0; i < photos.length; i++) {\r\n                formData.append('photos[]', photos[i], photos[i].name);\r\n            }\r\n\r\n            const postResult = await axios.post(apiEndpointPostCreating, formData, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n\r\n            const postId = postResult.data;\r\n\r\n            const formDataImages = new FormData();\r\n            formDataImages.append('post_id', postId);\r\n\r\n            for (let i = 0; i < photos.length; i++) {\r\n                formDataImages.append('photos[]', photos[i], photos[i].name);\r\n            }\r\n\r\n            await axios.post(apiEndpointUpload, formDataImages, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n\r\n            navigate(\"/profile\"); // Перенаправление на другую страницу\r\n        \r\n        } catch (error) {\r\n            console.error(\"Error:\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"main\">\r\n            <div className=\"group-form\">\r\n                <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\r\n                    <h2>Create Post</h2>\r\n                    <div className=\"input-data\">\r\n                        <textarea\r\n                            id=\"postName\"\r\n                            name=\"postName\"\r\n                            value={postName}\r\n                            onChange={handlePostNameChange}\r\n                            placeholder=\"Enter a comment for the post:\"\r\n                        />\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"photos\"\r\n                            name=\"photos[]\"\r\n                            accept=\"image/*\"\r\n                            placeholder=\"Post Photo\"\r\n                            onChange={handlePhotosChange}\r\n                            multiple\r\n                        />\r\n                        <button id=\"createPostButton\" type=\"submit\">Publish</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}